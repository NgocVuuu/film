(()=>{"use strict";self.addEventListener("push",t=>{if(t.data)try{let n=t.data.json(),e=n.title||"Pchill",i={body:n.body||"Bạn c\xf3 th\xf4ng b\xe1o mới!",icon:n.icon||"/logo.png",badge:n.badge||"/logo.png",data:{url:n.link||"/"},timestamp:n.timestamp||Date.now(),actions:[{action:"open",title:"Xem ngay"}]};t.waitUntil(self.registration.showNotification(e,i))}catch(t){console.error("Error handling push event:",t)}}),self.addEventListener("notificationclick",t=>{t.notification.close();let n=t.notification.data.url||"/";t.waitUntil(self.clients.matchAll({type:"window",includeUncontrolled:!0}).then(t=>{for(let e=0;e<t.length;e++){let i=t[e];if(i.url===n&&"focus"in i)return i.focus()}if(self.clients.openWindow)return self.clients.openWindow(n)}))})})();